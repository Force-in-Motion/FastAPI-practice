–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø—Ä–∏ HTTPBasic

–ö–æ–≥–¥–∞ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å

security = HTTPBasic()
credentials: Annotated[HTTPBasicCredentials, Depends(security)]


—Ç—ã –Ω–µ –ø–æ–ª—É—á–∞–µ—à—å JSON –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞, –∞ –ø–æ–ª—É—á–∞–µ—à—å –¥–∞–Ω–Ω—ã–µ –∏–∑ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization.

üöÄ 1. –ö–∞–∫ –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ Basic Auth

HTTP Basic Auth –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (body) –≤–æ–æ–±—â–µ.

–ö–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ curl) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö:

Authorization: Basic base64(username:password)


–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ª–æ–≥–∏–Ω "alice", –ø–∞—Ä–æ–ª—å "s3cr3t", —Ç–æ:

"alice:s3cr3t" ‚Üí base64 ‚Üí "YWxpY2U6czNjcjN0"


–ò –∏—Ç–æ–≥–æ–≤—ã–π HTTP-–∑–∞–ø—Ä–æ—Å –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

GET /auth/login HTTP/1.1
Host: example.com
Authorization: Basic YWxpY2U6czNjcjN0


‚ö†Ô∏è –í–∞–∂–Ω–æ: —Ç–µ–ª–æ (body) –ø—É—Å—Ç–æ–µ, JSON –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è.

üß† 2. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç HTTPBasic() –≤–Ω—É—Ç—Ä–∏

–ö–æ–≥–¥–∞ FastAPI –≤–∏–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:

credentials: Annotated[HTTPBasicCredentials, Depends(security)]


–∏ –∑–Ω–∞–µ—Ç, —á—Ç–æ security = HTTPBasic(), —Ç–æ –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤–æ—Ç —á—Ç–æ:

–ò—â–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization –≤ –∑–∞–ø—Ä–æ—Å–µ.

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "Basic ".

–û—Ç—Ä–µ–∑–∞–µ—Ç "Basic " –∏ –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–≤—à—É—é—Å—è —á–∞—Å—Ç—å –∏–∑ base64 ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–æ–∫—É "username:password".

–î–µ–ª–∏—Ç –µ—ë –ø–æ –¥–≤–æ–µ—Ç–æ—á–∏—é.

–°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç HTTPBasicCredentials(username="alice", password="s3cr3t").

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –≤ —Ç–≤–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.

–ï—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –æ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π, HTTPBasic() –≤—ã–±—Ä–æ—Å–∏—Ç 401 Unauthorized.

üß± 3. –ß—Ç–æ —Ç–∞–∫–æ–µ HTTPBasicCredentials

–≠—Ç–æ Pydantic-–º–æ–¥–µ–ª—å, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –≤–Ω—É—Ç—Ä–∏ FastAPI (—á–µ—Ä–µ–∑ pydantic.BaseModel), –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∞—è:

class HTTPBasicCredentials(BaseModel):
    username: str
    password: str


FastAPI —Å–æ–∑–¥–∞—ë—Ç –µ—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ç—ã —Å–∞–º –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—à—å.

‚öôÔ∏è 4. –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç ‚Äî –æ—Ç–ª–∏—á–∏–µ –æ—Ç JSON
–°–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–∞—á–∏	–û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¥–∞–Ω–Ω—ã–µ	–ü—Ä–∏–º–µ—Ä
HTTP Basic	–ò–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization	Authorization: Basic base64("user:pass")
Form / JSON	–ò–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (body)	{"username": "user", "password": "pass"}

HTTPBasic() —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º, –∞ –Ω–µ —Å —Ç–µ–ª–æ–º –∑–∞–ø—Ä–æ—Å–∞.